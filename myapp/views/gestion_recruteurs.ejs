<!DOCTYPE html>
<html lang="fr">
  <head>
    <title>Admin</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="test.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="container mt-5">
      <div class="row">
        <header class="row text-center"><h1>Administration du Site</h1></header>
      </div>

      <div class="row">
        <nav
          class="nav nav-pills navbar-expand-lg navbar-light bg-light mt-2 mb-2"
        >
          <a class="nav-item nav-link mx-2" href="accueil_administrateur.html"
            >Accueil</a
          >
          <a class="nav-item nav-link mx-2" href="gestion_utilisateurs.html"
            >Gestion des utilisateurs</a
          >
          <a class="nav-item nav-link mx-2" href="gestion_organisations.html"
            >Gestion des organisations</a
          >
          <a
            class="nav-item nav-link active mx-2"
            href="gestion_recruteurs.html"
            >Gestion des recruteurs</a
          >
        </nav>
      </div>

      <div class="row">
        <main class="col-sm-12">
          <h1>Validation des recruteurs</h1>
          <table class="table">
            <thead>
              <tr>
                <th>Nom</th>
                <th>Pr√©nom</th>
                <th>Email</th>
                <th>Valider</th>
                <th>Refuser</th>
              </tr>
            </thead>
            <tbody>
              <% recruteurs.forEach((recruteur, index) => { %>
              <tr class="page <%= Math.ceil((index + 1) / 10) %>">
                <td><%= recruteur.nom %></td>
                <td><%= recruteur.prenom %></td>
                <td><%= recruteur.email %></td>
                <td>
                  <a class="btn btn-primary" href="/valider/<%= recruteur.id %>"
                    >Valider</a
                  >
                </td>
                <td>
                  <a class="btn btn-danger" href="/refuser/<%= recruteur.id %>"
                    >Refuser</a
                  >
                </td>
              </tr>
              <% }) %>
            </tbody>
          </table>
          <ul class="pagination">
            <li class="page-item <%= currentPage === 1 ? 'disabled' : '' %>">
              <a
                class="page-link"
                href="#"
                tabindex="-1"
                onclick="changePage(currentPage - 1)"
                >Previous</a
              >
            </li>
            <% for (let i = 1; i <= Math.ceil(recruteurs.length / 10); i++) { %>
            <li class="page-item <%= currentPage === i ? 'active' : '' %>">
              <a class="page-link" href="#" onclick="changePage(<%= i %>)"
                ><%= i %></a
              >
            </li>
            <% } %>
            <li
              class="page-item <%= currentPage === Math.ceil(recruteurs.length / 10) ? 'disabled' : '' %>"
            >
              <a
                class="page-link"
                href="#"
                onclick="changePage(currentPage + 1)"
                >Next</a
              >
            </li>
          </ul>
        </main>
      </div>
    </div>

    <script>
      let currentPage = 1;
      const changePage = (page) => {
          if (page < 1 || page > Math.ceil(<%= recruteurs.length %> / 10)) return;
          currentPage = page;
          document.querySelectorAll("tr.page").forEach(row => row.style.display = 'none');
          document.querySelectorAll("tr.page" + currentPage).forEach(row => row.style.display = '');
          document.querySelectorAll(".pagination .page-item").forEach(item => item.classList.remove('active'));
          document.querySelector(".pagination .page-item:nth-child(" + (currentPage + 1) + ")").classList.add('active');
      }
      changePage(currentPage);
    </script>

    <footer></footer>
  </body>
</html>
